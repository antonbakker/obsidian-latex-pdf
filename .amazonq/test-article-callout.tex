% File: templates/article/template.tex
% Simple A4 article template for Pandoc-generated LaTeX
\documentclass[a4paper,11pt]{scrartcl}

% Encoding and fonts
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
% NOTE: microtype can conflict with Pandoc's highlighted code output when
% accents such as \^ are used inside token macros. To keep the template
% robust for code-heavy documents, we omit microtype here.

% Page layout (A4)
\usepackage[a4paper,margin=2.5cm]{geometry}

% Math and symbols
\usepackage{amsmath,amssymb}

% Tables
\usepackage{longtable,booktabs}
\usepackage{array} % for >{\raggedright\arraybackslash}p{...} column types used by Pandoc
\usepackage{calc}  % for (\linewidth - 10\tabcolsep) style width arithmetic

% Pandoc sometimes uses \real{...} in relative column widths; provide a simple definition.
\providecommand{\real}[1]{#1}

% Pandoc generates a \tightlist command for tight itemize/enumerate lists;
% define it here so LaTeX compiles without error.
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}%
  \setlength{\parskip}{0pt}%
}

% Dummy counter used by some Pandoc-generated table constructs
\newcounter{none}

% Code blocks and syntax highlighting
% Pandoc may wrap code blocks in a Shaded/Highlighting environment and use
% token commands like \SpecialStringTok. Define minimal, styling-agnostic
% versions here so that exports compile even when syntax highlighting is
% enabled.
\newenvironment{Shaded}{\begin{quote}}{\end{quote}}
\newenvironment{Highlighting}{\begin{Shaded}}{\end{Shaded}}

% Token commands used by Pandoc's default LaTeX highlighting. We define all of
% them as simple passthroughs so that the document compiles even if no colour
% package is loaded.
\newcommand{\AlertTok}[1]{#1}
\newcommand{\AnnotationTok}[1]{#1}
\newcommand{\AttributeTok}[1]{#1}
\newcommand{\BaseNTok}[1]{#1}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{#1}
\newcommand{\CommentTok}[1]{#1}
\newcommand{\ConstantTok}[1]{#1}
\newcommand{\ControlFlowTok}[1]{#1}
\newcommand{\DataTypeTok}[1]{#1}
\newcommand{\DecValTok}[1]{#1}
\newcommand{\DocumentationTok}[1]{#1}
\newcommand{\ErrorTok}[1]{#1}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{#1}
\newcommand{\FunctionTok}[1]{#1}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{#1}
\newcommand{\KeywordTok}[1]{#1}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{#1}
\newcommand{\OtherTok}[1]{#1}
\newcommand{\PreprocessorTok}[1]{#1}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{#1}
\newcommand{\SpecialStringTok}[1]{#1}
\newcommand{\StringTok}[1]{#1}
\newcommand{\VariableTok}[1]{#1}
\newcommand{\VerbatimStringTok}[1]{#1}
\newcommand{\WarningTok}[1]{#1}

% Graphics and hyperlinks
\usepackage{graphicx}
\usepackage{hyperref}

% Header includes injected by Pandoc (e.g. via --include-in-header).
% File: templates/common/callouts.tex
% Purpose: Provide LaTeX environments for Obsidian-style callouts (info,
% warning, tip, etc.) so that the plugin can map markdown callouts to
% consistent LaTeX blocks. These definitions are intentionally visual and
% self-contained so templates like "article" do not need to be modified to
% change callout appearance.

\usepackage[most]{tcolorbox}

% Base tcolorbox settings shared by all callouts.
\tcbset{
  enhanced,
  sharp corners,
  boxrule=0pt,
  frame hidden,
  colback=white,
  left=2mm,
  right=2mm,
  top=1.0ex,
  bottom=1.0ex,
  before skip=1.25ex,
  after skip=1.25ex,
}

% Helper: severity-specific colours
\newcommand{\calloutInfoColor}{blue!60!black}
\newcommand{\calloutWarningColor}{yellow!60!black}
\newcommand{\calloutTipColor}{green!60!black}
\newcommand{\calloutNoteColor}{gray!60!black}

% Helper: simple text icons (kept package-light; colours vary by severity)
\newcommand{\calloutIconInfo}{\textcolor{\calloutInfoColor}{\bfseries I}}
\newcommand{\calloutIconWarning}{\textcolor{\calloutWarningColor}{\bfseries !}}
\newcommand{\calloutIconTip}{\textcolor{\calloutTipColor}{\bfseries \checkmark}}
\newcommand{\calloutIconNote}{\textcolor{\calloutNoteColor}{\bfseries N}}

% Generic implementation macro: draws thin horizontal rules above and below
% the content and supports an optional title. When a title is provided we
% render an icon + title line above the first rule; when omitted we render
% an icon in the left margin, vertically aligned with the first text line.
\newenvironment{callout-generic}[3][]{%
  % #1: user title (may be empty)
  % #2: colour macro (e.g. \calloutInfoColor)
  % #3: icon macro (e.g. \calloutIconInfo)
  \begin{tcolorbox}[
    borderline north={0.4pt}{0pt}{#2},
    borderline south={0.4pt}{0pt}{#2},
    breakable,
  ]%
  % Decide whether a title was explicitly provided.
  \def\callout@title{#1}%
  \ifx\callout@title\@empty
    % No explicit title: icon to the left of the callout text.
    {#3}\hspace{0.75em}\begingroup\parbox[t]{\dimexpr\linewidth-2.0em\relax}%
  \else
    % Title present: icon + title above the first horizontal line.
    {\textcolor{#2}{#3\hspace{0.5em}\textbf{#1}}}\par\medskip
  \fi
}{%
  \ifx\callout@title\@empty
    \endgroup
  \fi
  \end{tcolorbox}%
}

% Public environments used by the plugin. They are thin wrappers around the
% generic implementation with severity-specific colours and icons.

% Info / note callout
\newenvironment{callout-info}[1][]{%
  \begin{callout-generic}[#1]{\calloutInfoColor}{\calloutIconInfo}%
}{%
  \end{callout-generic}%
}

% Warning callout
\newenvironment{callout-warning}[1][]{%
  \begin{callout-generic}[#1]{\calloutWarningColor}{\calloutIconWarning}%
}{%
  \end{callout-generic}%
}

% Tip / success callout
\newenvironment{callout-tip}[1][]{%
  \begin{callout-generic}[#1]{\calloutTipColor}{\calloutIconTip}%
}{%
  \end{callout-generic}%
}

% Generic fallback callout
\newenvironment{callout-note}[1][]{%
  \begin{callout-generic}[#1]{\calloutNoteColor}{\calloutIconNote}%
}{%
  \end{callout-generic}%
}

% Optional client-specific configuration

% Metadata from Pandoc
  \date{\today}

\begin{document}



\section{Test article callout}\label{test-article-callout}

Here is a raw LaTeX callout environment:

\begin{callout-info}{Test}
This is inside a callout.
\end{callout-info}

\end{document}
